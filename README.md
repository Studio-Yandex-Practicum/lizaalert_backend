## Платформа для обучения добровольцев "ЛизаАлерт" - Backend

[Список задач](https://github.com/Studio-Yandex-Practicum/lizaalert_backend/issues/19)

### Установка

#### Установить Docker и Docker-Compose.

[См. официальная документация по установке Docker](https://docs.docker.com/engine/install/) <br>
[См. официальная документация по установке Docker compose](https://docs.docker.com/compose/install/)


#### Скопировать содержимое образца файла окружения `cp .env.sample .env` в следующих директорях:
1. `lizaalert-backend/`
2. `services/postgres`

#### Собрать контейнеры

`make build`

#### Запуск

`docker-compose up -d`

### Использование

- В случае, если сборка запускается впервые, нужно выполнить следующие действия:

  - Применить миграции `python manage.py migrate --no-input`. 
  - В случае если база была предварительно заполнена данными и зависимостями - миграции стоит применять с флагом `--fake-initial`
  - Создать суперпользователя `python manage.py createsuperuser`
  - Получить статику `python manage.py collectstatic --no-input`
  - Отключиться от контейнера: `exit`
- Админка доступна [здесь](http://localhost:8000/admin)


### Общие требования к коду проекта и принципы код-ревью

- [Общие требования к коду проекта](docs/codestyle.md)

### Команды Makefile

- `list` - выводит список доступных команд из Makefile
- `check` - проверка кода линтером в отдельном контейнере
- `db_start` / `db_stop` - запускает / останавливает контейнер с БД Postgres
- `run` - запуск БД, миграций и девсервера Django
- `func_debug` - запуск функциональных тестов (ручками в соседнем терминале с make run: в результате у тебя есть логи тестов с запросом и трейсбек сервера)
- `unittest` - запуск юниттестов pytest в отдельном контейнере
- `func` - запуск функциональных тестов только с логом тестов (быстро проверить, что ничего не отломал своими гениальными идеями)
